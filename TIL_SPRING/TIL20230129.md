# 2023 01 29 Spring 복습 정리 

## 서블릿 속성
다음 세 가지 서블릿 API 클래스에 저장되는 객체(정보), 서블릿의 스코프(scope)는 서블릿 API에 바인딩된 속성에 대한 접근 범위를 의미한다. 
1. ServletContext(애플리케이션 스코프)
- 속성은 애플리케이션 전체에 대해 접근할 수 있다.
2. HttpSession(세션 스코프)
- 속성은 브라우저에서만 접근할 수 있다.
3. HttpServletRequest(리퀘스트 스코프)
- 속성은 해당 요청/응답 사이클에서만 접근할 수 있다. 

## Filter
필터란 브라우저에서 서블릿에 요청하거나 응답할 때 미리 요청이나 응답과 관련해 여러 가지 작업을 처리하는 기능 
1. 요청 필터
- 사용자 인증 및 권한 검사
- 요청 시 요청 관련 로그 작업
- 인코딩 기능
2. 응답 필터
- 응답 결과에 대한 암호화 작업
- 서비스 시간 측정 
3. 필터 관련 API
- javax.servlet.Filter
- javax.servlet.FilterChain
- javax.servlet.FilterConfig

사용자 정의 필터 클래스는 반드시 Filter 인터페이스를 구현해야한다. 브라우저 요청 시 doFilter() 메소드의 매개변수로 request, response가 전달되며 doFilter() 메소드는 FilterChain 타입인 chain을 세번째 매개변수로 가진다. 전달된 request를 이용해 한글 인코딩 작업을 한다. chain.doFilter() 메소드를 기준으로 위쪽에 위치한 코드는 요청 필터 기능을 수행한다. 

## RequestWrapper
필터가 필터로서의 제 기능을 위해서는 클라이언트의 Request를 변경하고 또한 클라이언트로 되돌아가는 Response를 변경할 수 있어야 한다. 이러한 기능을 도와주는 것이 HttpServletRequestWrapper 클래스와 HttpServletResponseWrapper 클래스이다. 

## JSP
기존 서블릿에서는 자바 코드를 기반으로 문자열을 사용해 HTML과 자바스크립트로 화면을 구현했으나 JSP는 이와 반대로 HTML, CSS와 자바스크립트를 기반으로 JSP 요소들을 사용해 화면을 구현한다. 

<등장배경>

문제점 
- 웹 프로그램의 화면 기능이 복잡해지므로 거블릿의 자바 기반으로 화면 기능 구현 시 어려움이 발생
- 디자이너 입장에서 화면 구현 시 자바 코드로 인해 작업에 어려움
- 서블릿에 비즈니스 로직과 화면 기능이 같이 있다 보니 개발 후 유지관리가 어려움 

해결책
- 서블릿의 비즈니스 로직과 결과를 보여주는 화면 기능을 분리
- 비즈니스 로직과 화면을 분리함으로써 개발자는 비즈니스 로직 구현에 집중하고 디자이너는 화면 기능 구현에만 집중 
- 개발 후 재사용성과 유지관리에 유리 

<구성요소>
- HTML 태그, CSS 그리고 자바스크립트 코드
- JSP 기본 태그
- JSP 액션 태그
- 개발자가 직접 만들거나 프레임워크에서 제공하는 커스텀 태그 

JSP 파일 자체를 브라우저로 전송하면 브라우저는 JSP 요소들을 인식하지 못한다. 따라서 JSP는 톰캣 컨테이너에 의해 브라우저로 전송되기 전에 실행 단계를 거쳐야 한다. 

<톰캣 컨테이너에서 JSP 변환 과정>
1. 변환 단계(Translation Step) : 컨테이너는 JSP 파일을 자바 파일로 변환
2. 컴파일 단계(Compile Step) : 컨테이너는 변환된 자바 파일을 클래스 파일로 컴파일 
3. 실행 단계(Interpret Step) : 컨테이너는 class 파일을 실행하겨 그 결과를 브라우저로 전송해 출력 



참고자료)

[자바 웹을 다루는 기술_길벗](https://www.gilbut.co.kr/)